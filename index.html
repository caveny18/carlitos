<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bienvenido a Carlitos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top, #1c1630 0%, #0d0a1b 80%);
      color: white;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .text-gradient {
      background-image: linear-gradient(90deg, #8b5cf6, #d946ef);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .btn-glow {
      transition: all 0.3s ease;
      box-shadow: 0 0 12px rgba(147, 51, 234, 0.4);
    }

    .btn-glow:hover {
      box-shadow: 0 0 25px rgba(147, 51, 234, 0.8);
      transform: translateY(-2px);
    }

    .fade-in {
      animation: fadeIn 1.2s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body class="flex flex-col items-center justify-center text-center px-6 py-10">
  
  <!-- Imagen principal -->
  <div class="fade-in mb-8">
    <img src="./bienvenida.png" alt="Carlitos Bienvenida" class="w-80 sm:w-96 md:w-[480px] mx-auto rounded-3xl shadow-2xl border border-purple-600/30">
  </div>

  <!-- Texto de bienvenida -->
  <h1 class="text-4xl sm:text-5xl font-extrabold mb-6 leading-tight fade-in">
    ğŸ‘‹ Bienvenido a <span class="text-gradient">Carlitos</span>
  </h1>

  <p class="text-gray-400 max-w-md mb-10 fade-in text-sm sm:text-base">
    Tu compaÃ±ero financiero inteligente. Aprende, ahorra e invierte con la guÃ­a de nuestros mentores ğŸ’ğŸ¿ï¸ğŸˆğŸ¦…
  </p>

  <!-- Botones -->
  <div class="flex flex-col space-y-4 w-64 fade-in">
    <button id="btnLogin" class="btn-glow bg-purple-600 hover:bg-purple-700 py-3 rounded-xl font-semibold text-white">
      ğŸš€ Ya tengo una cuenta
    </button>
    <button id="btnRegister" class="btn-glow bg-green-600 hover:bg-green-700 py-3 rounded-xl font-semibold text-white">
      ğŸŒ± Empieza ahora
    </button>
  </div>

  <!-- Scripts -->
  <script type="module">
    import { auth, db, provider } from './firebase-config.js';
    import { signInWithPopup } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
    import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

    const loginBtn = document.getElementById('btnLogin');
    const registerBtn = document.getElementById('btnRegister');

    // Iniciar sesiÃ³n con Google
    loginBtn.addEventListener('click', async () => {
      try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;
        console.log("Usuario:", user.email);

        // Verificar si el usuario ya tiene perfil
        const userDoc = await getDoc(doc(db, "usuarios", user.uid));

        if (userDoc.exists()) {
          console.log("âœ… Perfil encontrado â†’ Redirigiendo a Carlitos.html");
          window.location.href = "Carlitos.html";
        } else {
          console.log("ğŸ†• Nuevo usuario â†’ Redirigiendo al Onboarding");
          window.location.href = "onboarding.html";
        }
      } catch (err) {
        console.error("âŒ Error al iniciar sesiÃ³n:", err);
        alert("No se pudo iniciar sesiÃ³n. IntÃ©ntalo de nuevo.");
      }
    });

    // Crear cuenta â†’ siempre lleva al Onboarding
    registerBtn.addEventListener('click', () => {
      window.location.href = "onboarding.html";
    });
  </script>
</body>
</html>
