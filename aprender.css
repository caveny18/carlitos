/* aprender.css - Mapa de niveles + modo gamer pro */

/* ---------------- VARIABLES (claro por defecto) ---------------- */
:root{
  --maxw:1100px;
  --bg: linear-gradient(180deg,#ecfdf5 0%, #ffffff 60%);
  --panel-bg: rgba(255,255,255,0.92);
  --muted:#6b7280;
  --accent-1:#059669;
  --accent-2:#06b6d4;
  --accent-3:#7c3aed;
  --shadow: 0 14px 40px rgba(2,6,23,0.07);
  --glass: rgba(255,255,255,0.94);
  --neon-1: rgba(6,182,212,0.14);
  --map-bg: linear-gradient(180deg,#f8fffb 0%, #ffffff 60%);
  --text: #0f172a;
  --node-size: 86px;
  --ease: cubic-bezier(.2,.9,.3,1);
  --transition: 320ms;
}

/* ---------------- DARK / GAMER THEME ---------------- */
body.dark-theme {
  --bg: linear-gradient(180deg,#05060a 0%, #07070b 60%);
  --panel-bg: linear-gradient(180deg, rgba(12,12,16,0.6), rgba(8,8,12,0.5));
  --muted: #9aa7bd;
  --accent-1: #00ffd5;
  --accent-2: #9b5cff;
  --accent-3: #ffb86b;
  --shadow: 0 20px 60px rgba(0,0,0,0.6);
  --neon-1: rgba(0,255,213,0.06);
  --map-bg: linear-gradient(180deg,#02020a 0%, #06060a 60%);
  --text: #e6eef8;
}

/* ---------------- BASE ---------------- */
*{box-sizing:border-box}
html,body{height:100%; margin:0; font-family:Inter, system-ui, -apple-system; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; background:var(--bg); color:var(--text); transition: background var(--transition) ease, color var(--transition) ease;}
a{color:inherit}
.app-wrap{max-width:var(--maxw); margin:0 auto; padding:20px}

/* TOPBAR */
.topbar{display:flex;align-items:center;justify-content:space-between;padding:14px;border-radius:14px;background:var(--panel-bg);box-shadow:var(--shadow);border:1px solid rgba(2,6,23,0.04); gap:12px}
.brand-info{display:flex;gap:12px;align-items:center}
.brand-badge{width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,#fff,#f7fff7);display:grid;place-items:center;position:relative;box-shadow:0 8px 24px rgba(2,6,23,0.04);overflow:hidden}
.brand-badge img{width:38px;height:38px;object-fit:contain}
.brand-initial{font-weight:800;color:var(--accent-1);font-size:20px}
.hello{font-weight:800;font-size:16px}
.muted{color:var(--muted);font-size:13px}

/* top controls */
.top-controls{display:flex;gap:10px;align-items:center}
.status-pill{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;background:var(--panel-bg);box-shadow:0 8px 30px rgba(2,6,23,0.04);font-weight:700}
.btn-ghost{background:transparent;border:0;color:var(--muted);padding:6px 8px;border-radius:10px;cursor:pointer}
.btn-primary{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#fff;padding:10px 12px;border-radius:12px;border:0;font-weight:800}
.btn-primary-sm{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#fff;padding:7px 10px;border-radius:10px;border:0;font-weight:800;font-size:13px}
.btn-outline{background:transparent;border:1px solid rgba(2,6,23,0.06);padding:9px 11px;border-radius:10px}

/* LAYOUT: map + aside */
.map-layout{display:grid;grid-template-columns: 1fr 320px; gap:18px; margin-top:18px}
@media (max-width:1000px){ .map-layout{grid-template-columns: 1fr; } .side-panel{order:2} .map-panel{order:1} }

/* MAP PANEL */
.map-panel{padding:14px;border-radius:14px;background:var(--panel-bg);box-shadow:var(--shadow);border:1px solid rgba(2,6,23,0.04)}
.map-top{display:flex;justify-content:space-between;align-items:center;gap:12px}
.map-title{font-size:18px;font-weight:800;margin:0}
.map-controls{display:flex;gap:8px;align-items:center}
.select{padding:8px 10px;border-radius:10px;border:1px solid rgba(2,6,23,0.06)}

/* MAP CANVAS WRAP */
.map-canvas-wrap{position:relative;height:520px;margin-top:12px;border-radius:12px; overflow:auto; background:var(--map-bg); border:1px solid rgba(2,6,23,0.03); padding:30px; touch-action: pan-y;}

/* SVG (connections) */
.map-svg{position:absolute;inset:0;width:100%;height:100%;pointer-events:none; z-index:1}

/* NODES container */
.map-nodes{position:relative; z-index:2; min-width:1200px; min-height:520px;}

/* NODE (card-like circular) */
.map-node {
  position:absolute;
  width:var(--node-size);
  height:var(--node-size);
  border-radius:999px;
  display:grid;
  place-items:center;
  color:#fff;
  font-weight:900;
  cursor:pointer;
  box-shadow: 0 18px 48px rgba(2,6,23,0.06);
  transition: transform var(--transition) var(--ease), box-shadow var(--transition), filter var(--transition);
  user-select: none;
}
.map-node .node-label { position:absolute; top: calc(100% + 8px); left: 50%; transform: translateX(-50%); font-weight:800; font-size:13px; color:var(--text); text-align:center; width:120px; }
.map-node.locked{opacity:0.45; filter:grayscale(0.15); pointer-events:none;}
.map-node:hover{ transform: translateY(-8px) scale(1.04); box-shadow: 0 30px 80px rgba(2,6,23,0.12); }

/* inner ring (glow & progress) */
.node-ring { position:absolute; width:100%; height:100%; border-radius:999px; overflow:visible; pointer-events:none; z-index:0; }
.node-core { z-index:3; font-size:22px; }

/* small sparkle for completed */
.node-sparkle { position:absolute; width:12px; height:12px; border-radius:6px; right:8px; top:8px; background:rgba(255,255,255,0.9); box-shadow:0 6px 20px rgba(255,255,255,0.12); opacity:0; transform:scale(.4); transition:all 420ms; }
.map-node.completed .node-sparkle { opacity:1; transform:scale(1); }

/* DETAIL / SIDE PANEL */
.side-panel{display:flex;flex-direction:column;gap:12px}
.detail-card{padding:14px;border-radius:12px;background:var(--panel-bg);box-shadow:var(--shadow);border:1px solid rgba(2,6,23,0.04)}
.detail-layout{display:flex;gap:12px;align-items:flex-start}
.detail-icon{width:88px;height:88px;border-radius:12px;background:linear-gradient(90deg,#fff,#f7fff7);display:grid;place-items:center;font-weight:900;color:#fff}
.detail-title{font-size:18px;margin:0}
.pill-flag{display:inline-block;padding:6px 8px;border-radius:999px;background:#eefaf3;color:var(--accent-1);font-weight:800;font-size:12px}

/* STAT CARD & PROGRESS */
.stat-card{padding:12px}
.stat-row{display:flex;justify-content:space-between;align-items:center}
.progress-track{background:#f1f5f9;height:10px;border-radius:999px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));border-radius:999px;transition:width .8s ease}

/* BOTTOM NAV */
.bottom-nav{position:fixed;left:0;right:0;bottom:0;background:var(--panel-bg);border-top:1px solid rgba(2,6,23,0.04);box-shadow:0 -8px 24px rgba(2,6,23,0.04);padding:10px 0}
.nav-inner{max-width:var(--maxw);margin:0 auto;display:flex;justify-content:space-around;align-items:center}
.nav-item{color:var(--muted);font-weight:700;text-decoration:none}
.nav-item.active{color:var(--accent-1)}

/* TOUR overlay / bubble */
.tour-overlay{position:fixed;inset:0;background:rgba(2,6,23,0.6);z-index:9998;backdrop-filter:blur(2px)}
.tour-bubble{position:fixed;z-index:10000;background:var(--panel-bg);padding:14px;border-radius:12px;box-shadow:0 30px 80px rgba(2,6,23,0.45);max-width:420px;color:var(--text)}

/* ANIMATIONS (neon pulse on dark) */
@keyframes neonPulse {
  0%{ box-shadow: 0 0 0 0 rgba(0,255,213,0.06); }
  50%{ box-shadow: 0 0 28px 6px rgba(0,255,213,0.06); }
  100%{ box-shadow: 0 0 0 0 rgba(0,255,213,0.06); }
}
body.dark-theme .map-node.active { animation: neonPulse 2.2s infinite; }

/* DRAGGING (UX) */
.map-canvas-wrap:active { cursor:grabbing; }

/* RESPONSIVE */
@media (max-width:900px) {
  .map-canvas-wrap{height:420px;padding:18px}
  .map-nodes{min-width:900px}
  .map-node .node-label{width:96px}
}

/* PRINT */
@media print {
  .bottom-nav, .btn, .tour-overlay { display:none !important; }
}
